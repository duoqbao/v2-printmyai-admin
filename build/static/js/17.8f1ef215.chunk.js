(this["webpackJsonpprint-admin"]=this["webpackJsonpprint-admin"]||[]).push([[17],{415:function(e,t,n){"use strict";var r=n(106);t.a={getEvents:function(){return r.b.get("/ecommerc/event")},update:function(e){return r.b.put("/ecommerc/event",e)},getStores:function(){return r.b.get("/ecommerc/event/get-stores")},updateStore:function(e){return r.b.put("/ecommerc/event/set-shop?shopId=".concat(e))}}},512:function(e,t,n){},538:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var r=n(126),a=n(44),s=n.n(a),c=n(65),i=n(62),u=n(0),o=n(255),l=n(124),d=n(383),j=n(181),b=n(379),p=n(382),f=n(66),h=n(376),v=n(377),O=n(254),x=n(378),m=n(143),y=n(106),g=function(){return y.b.get("/3d-services")},w=function(e,t){return y.b.put("/3d-services/".concat(e),{secretKey:t})},k=function(){return y.b.get("/3d-services/astria-tunes")},C=function(e){var t=e.base_tune_id,n=e.branch;return y.b.post("/3d-services/astria-config",{base_tune_id:t,branch:n})},S=n(415),_=(n(512),n(214),n(380)),P=n(7),I={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};function N(e){var t=e.onClose,n=_.a.useForm(),a=Object(i.a)(n,1)[0],u=function(){var e=Object(c.a)(s.a.mark((function e(n){var a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.b.post("/auth/change-password",Object(r.a)({},n));case 3:o.b.success("Success!"),t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o.b.error(JSON.stringify(null===(a=e.t0.response)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(P.jsx)("div",{style:{padding:20},children:Object(P.jsxs)(_.a,Object(r.a)(Object(r.a)({form:a},I),{},{layout:"vertical",onFinish:u,children:[Object(P.jsx)(_.a.Item,{name:"old_password",label:"Old Password",rules:[{required:!0,message:"Please input your password!"}],children:Object(P.jsx)(O.a.Password,{})}),Object(P.jsx)(_.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],children:Object(P.jsx)(O.a.Password,{})}),Object(P.jsx)(_.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject(new Error("The two passwords that you entered do not match!")):Promise.resolve()}}}],children:Object(P.jsx)(O.a.Password,{})}),Object(P.jsx)(_.a.Item,{style:{display:"flex",justifyContent:"center",width:"100%"},children:Object(P.jsx)(f.a,{htmlType:"submit",type:"primary",children:"Confirm"})})]}))})}function E(){var e=Object(u.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],y=Object(u.useState)({}),_=Object(i.a)(y,2),I=_[0],E=_[1],K=Object(u.useState)(!1),T=Object(i.a)(K,2),F=T[0],q=T[1],J=Object(u.useState)(""),B=Object(i.a)(J,2),U=B[0],V=B[1],W=Object(u.useState)([]),M=Object(i.a)(W,2),z=M[0],A=M[1],D=Object(u.useState)(!1),G=Object(i.a)(D,2),H=G[0],L=G[1],Q=function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.prev=1,e.next=4,g();case 4:t=e.sent,a(t),q(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),q(!1);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.prev=1,e.next=4,S.a.getEvents();case 4:return t=e.sent,V(t.shopId),e.next=8,S.a.getStores();case 8:n=e.sent,A(n),L(!1),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(1);case 15:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){Q()}),[]);var X=function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(I.sku,I.secretKey);case 3:e.sent,o.b.success("Updated successfully"),Q(),"printify"===I.sku&&R(),"astria"==I.sku&&be(),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.updateStore(t);case 3:e.sent,V(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Z=[{title:"",dataIndex:"id",key:"id",render:function(e){return Object(P.jsx)(l.a,{checked:e===U,onChange:function(t){return Y(e)}})}},{title:"Name Shope",dataIndex:"title",key:"title"},{title:"Sales Changes",dataIndex:"sales_channel",key:"sales_channel"}],$=Object(u.useState)([]),ee=Object(i.a)($,2),te=ee[0],ne=ee[1],re=["sd15","sd21","protogen34","openjourney2"],ae=Object(u.useState)(!1),se=Object(i.a)(ae,2),ce=se[0],ie=se[1],ue=Object(u.useState)({base_tune_id:"",branch:""}),oe=Object(i.a)(ue,2),le=oe[0],de=oe[1],je=function(){var e=Object(c.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,k();case 3:r=e.sent,ne(r),de(null===(t=n.filter((function(e){return"astria"==e.sku}))[0])||void 0===t?void 0:t.metadata),ie(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(Object(r.a)({},le));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){"astria"==I.sku&&je()}),[I]);var pe=Object(u.useState)(!1),fe=Object(i.a)(pe,2),he=fe[0],ve=fe[1];return Object(P.jsxs)("div",{children:[Object(P.jsx)(d.a,{open:he,onCancel:function(){ve(!1)},footer:null,children:Object(P.jsx)(N,{onClose:function(){return ve(!1)}})}),Object(P.jsx)(j.a,{spinning:F,children:Object(P.jsx)(b.a,{bordered:!1,className:"criclebox tablespace mb-24 settings",title:Object(P.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(P.jsx)(p.a.Title,{level:4,children:"Settings"}),Object(P.jsx)(f.a,{onClick:function(){return ve(!0)},children:"Change Password"})]}),children:Object(P.jsx)("div",{style:{padding:12},children:Object(P.jsxs)(h.a,{gutter:[12,12],children:[Object(P.jsx)(v.a,{span:8,children:Object(P.jsx)("ul",{className:"menu-setting",children:n.map((function(e,t){return Object(P.jsx)("li",{className:"item ".concat(I._id===e._id?"active":""),onClick:function(){"printify"===e.sku&&R(),E(e)},children:e.name},t)}))})}),Object(P.jsx)(v.a,{span:16,children:Object(P.jsx)(h.a,{hidden:!I._id,children:Object(P.jsx)(v.a,{span:24,children:Object(P.jsxs)("div",{style:{padding:" 0 24px"},children:[Object(P.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:24},children:Object(P.jsx)(f.a,{type:"primary",onClick:function(){return X()},children:"Update"})}),!["printify","astria"].includes(I.sku)&&Object(P.jsxs)("div",{className:"input",children:[Object(P.jsxs)("label",{children:["Key : ",I.name]}),Object(P.jsx)(O.a.Password,{value:I.secretKey,onChange:function(e){var t=e.target.value;E(Object(r.a)(Object(r.a)({},I),{},{secretKey:t}))}})]}),Object(P.jsx)("div",{style:{padding:24},hidden:"printify"!==I.sku,children:Object(P.jsx)(x.a,{columns:Z,dataSource:z,pagination:!1,loading:H})}),Object(P.jsx)("div",{style:{padding:24},hidden:"astria"!==I.sku,children:Object(P.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:ce?Object(P.jsx)(j.a,{}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("div",{style:{margin:5},children:[Object(P.jsx)(p.a.Title,{level:5,children:"Base tune"}),Object(P.jsx)(m.a,{onChange:function(e){de(Object(r.a)(Object(r.a)({},le),{},{base_tune_id:e}))},style:{minWidth:400},defaultValue:function(){var e,t;return"".concat(null===(e=te.filter((function(e){return e.id==(null===le||void 0===le?void 0:le.base_tune_id)}))[0])||void 0===e?void 0:e.title," - ").concat(null===(t=te.filter((function(e){return e.id==(null===le||void 0===le?void 0:le.base_tune_id)}))[0])||void 0===t?void 0:t.id)},children:null===te||void 0===te?void 0:te.map((function(e){return Object(P.jsxs)(m.a.Option,{value:e.id,title:e.title,children:[e.title," - ",e.id]},e.id)}))})]}),Object(P.jsxs)("div",{style:{margin:5},children:[Object(P.jsx)(p.a.Title,{level:5,children:"Model"}),Object(P.jsx)(m.a,{style:{minWidth:200},onChange:function(e){de(Object(r.a)(Object(r.a)({},le),{},{branch:e}))},value:null===le||void 0===le?void 0:le.branch,children:null===re||void 0===re?void 0:re.map((function(e){return Object(P.jsx)(m.a.Option,{value:e,children:e})}))})]})]})})})]})})})})]})})})})]})}}}]);
//# sourceMappingURL=17.8f1ef215.chunk.js.map