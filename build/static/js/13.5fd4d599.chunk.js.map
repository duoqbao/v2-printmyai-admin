{"version":3,"sources":["api/product.js","pages/Sales/index.js"],"names":["getList","id","api","get","concat","creted","body","post","getAllBlueprint","update","put","delete","getPrintProvider","getVariantsByProvider","productId","printProviderId","getProductBySales","toggleSale","priceSale","salePrice","formattedNumber","number","toString","replace","InputPrice","_ref","value","setPriceSale","_jsxs","style","display","gap","flexDirection","children","_jsx","Input","prefix","onKeyPress","isNumber","onChange","e","target","key","match","preventDefault","indexOf","split","length","Sales","_useState","useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","product","setProduct","_useState5","_useState6","_useState7","_useState8","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_context","prev","next","ApiProduct","sent","t0","stop","apply","arguments","useEffect","handleSaleUpdate","_ref3","_callee2","item","_args2","_context2","undefined","_id","message","success","className","Spin","spinning","Row","gutter","Col","xs","span","Card","bordered","title","padding","map","c","index","sm","md","lg","xl","Image","width","height","src","image","Tooltip","placement","minHeight","minWidth","background","sizes","s","justifyContent","alignItems","Typography","color","fontWeight","parseFloat","price","toFixed","textDecoration","InfoCircleFilled","class","type","Popconfirm","onConfirm","_callee3","_context3","Number","error","abrupt","onCancel","okText","cancelText","Button","ghost","danger","onClick","Empty"],"mappings":"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","file":"static/js/13.5fd4d599.chunk.js","sourcesContent":["import api from \"./index\";\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default {\n  getList: (id) => {\n    return api.get(`/ecommerc/products/${id}/`);\n  },\n  creted: (id, body) => {\n    return api.post(`/ecommerc/products/${id}`, body);\n  },\n  getAllBlueprint: () => {\n    return api.get(\"ecommerc/products/blueprints\");\n  },\n  update: (id, body) => {\n    return api.put(`/ecommerc/products/${id}/detail`, body);\n  },\n  delete: (id) => {\n    return api.delete(`/ecommerc/products/${id}/detail`);\n  },\n  getPrintProvider: (id) => {\n    return api.get(`/ecommerc/products/${id}/print-providers`);\n  },\n  getVariantsByProvider: (productId, printProviderId) => {\n    return api.get(\n      `/ecommerc/products/${productId}/print-providers/${printProviderId}/variants`\n    );\n  },\n  getProductBySales: () => {\n    return api.get(`/ecommerc/products/on-sale`);\n  },\n  toggleSale: (priceSale, id) => {\n    return api.put(`/ecommerc/products/${id}/sale`, { salePrice: priceSale });\n  },\n};\n","import React, { useEffect, useState } from \"react\";\nimport {\n  Row,\n  Col,\n  Card,\n  Spin,\n  Button,\n  message,\n  Popconfirm,\n  Empty,\n  Input,\n  Image,\n  Tooltip,\n  Typography,\n} from \"antd\";\nimport ApiProduct from \"api/product\";\nimport Carousel from \"components/Carousel/idnex\";\nimport \"./index.scss\";\nimport { InfoCircleFilled } from \"@ant-design/icons\";\nconst formattedNumber = (number) => {\n  return number ? number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") : \"\";\n};\n\nconst InputPrice = ({ value, setPriceSale }) => {\n  return (\n    <div style={{ display: \"flex\", gap: \"12px\", flexDirection: \"column\" }}>\n      <label>Price Sale</label>\n      <Input\n        prefix=\"%\"\n        value={formattedNumber(value)}\n        onKeyPress={isNumber}\n        onChange={(e) => {\n          const value = e.target.value;\n          setPriceSale(value.replace(/,/g, \"\"));\n        }}\n      />\n    </div>\n  );\n};\n\nconst isNumber = (e) => {\n  if (e.key.match(/[^0-9.]/g)) {\n    e.preventDefault();\n  } else if (e.target.value.indexOf(\".\") !== -1 && e.key === \".\") {\n    // If there is already a dot and the user types another dot, prevent it\n    e.preventDefault();\n  } else if (e.target.value.split(\".\").length > 1 && e.key === \".\") {\n    // If there is already one dot and the user types another digit after the dot, allow it\n    return true;\n  } else if (\n    e.target.value.split(\".\").length > 1 &&\n    e.target.value.split(\".\")[1].length === 2\n  ) {\n    // Only allow two decimal places\n    e.preventDefault();\n  } else {\n    return true;\n  }\n};\nexport default function Sales() {\n  const [loading, setLoading] = useState(false);\n  const [product, setProduct] = useState([]);\n  const [isVisible, setIsVisible] = useState(false);\n  const [priceSale, setPriceSale] = useState(0);\n\n  const getProductBySales = async () => {\n    setLoading(true);\n    try {\n      const res = await ApiProduct.getProductBySales();\n      setProduct(res);\n      setPriceSale(0);\n      setLoading(false);\n    } catch (error) {}\n  };\n  useEffect(() => {\n    getProductBySales();\n  }, []);\n  const handleSaleUpdate = async (priceSale = 0, item) => {\n    try {\n      const res = await ApiProduct.toggleSale(priceSale, item._id);\n      getProductBySales();\n      message.success(\"Off sale successful\");\n    } catch (error) {}\n  };\n\n  return (\n    <div className=\"layout-styles\">\n      <Spin spinning={loading}>\n        <Row gutter={[24, 24]}>\n          <Col xs=\"24\" span={24}>\n            <Card\n              bordered={false}\n              className=\"criclebox tablespace mb-24\"\n              title=\"Product by Sales\"\n            >\n              <Row\n                className=\"rowgap-vbox\"\n                gutter={[24, 0]}\n                style={{ padding: 24 }}\n              >\n                {product.length > 0 ? (\n                  product?.map((c, index) => (\n                    <Col\n                      key={index}\n                      xs={24}\n                      sm={24}\n                      md={12}\n                      lg={6}\n                      xl={6}\n                      className=\"mb-24\"\n                    >\n                      <Card bordered={false} className=\"criclebox \">\n                        <div className=\"card\">\n                          <Image\n                            style={{ width: \"230px\", height: \"150px\" }}\n                            src={c.image}\n                          />\n\n                          <h1>{c.title}</h1>\n                          <p className=\"price sale\">{`-${\n                            formattedNumber(c.salePrice || 0) || 0\n                          }%`}</p>\n                          <Tooltip\n                            placement=\"left\"\n                            title={\n                              <div\n                                style={{\n                                  minHeight: 300,\n                                  minWidth: 200,\n                                  background: \"#fff\",\n                                }}\n                              >\n                                {c.sizes.map((s) => (\n                                  <div\n                                    style={{\n                                      padding: 10,\n                                    }}\n                                  >\n                                    <div\n                                      style={{\n                                        display: \"flex\",\n                                        justifyContent: \"space-between\",\n                                        alignItems: \"center\",\n                                        padding: \"10px 0px\",\n                                      }}\n                                    >\n                                      <Typography\n                                        style={{\n                                          color: \"#333\",\n                                          fontWeight: \"bold\",\n                                        }}\n                                      >\n                                        {s.title} :\n                                      </Typography>\n                                      <Typography\n                                        style={{\n                                          color: \"#bd4040\",\n                                          fontWeight: \"bold\",\n                                        }}\n                                      >\n                                        {parseFloat(\n                                          s?.price\n                                            ? s?.price -\n                                                s?.price * (c?.salePrice / 100)\n                                            : c.price -\n                                                c?.price * (c?.salePrice / 100)\n                                        ).toFixed(2)}{\" \"}\n                                        $\n                                      </Typography>\n                                    </div>\n                                    <div\n                                      style={{\n                                        display: \"flex\",\n                                        justifyContent: \"flex-end\",\n                                      }}\n                                    >\n                                      <Typography\n                                        style={{\n                                          fontWeight: \"bold\",\n                                          textDecoration: \"line-through\",\n                                        }}\n                                      >\n                                        {s?.price ? s?.price : c.price} $\n                                      </Typography>\n                                    </div>\n                                  </div>\n                                ))}\n                              </div>\n                            }\n                          >\n                            <InfoCircleFilled style={{ color: \"#0a5266\" }} />\n                          </Tooltip>\n                          <p class=\"price\">{`${formattedNumber(\n                            c.price || 0\n                          )}$`}</p>\n                          <p>{c.type}</p>\n\n                          <div className=\"button-flex\">\n                            <Popconfirm\n                              title={\n                                <InputPrice\n                                  value={priceSale}\n                                  setPriceSale={setPriceSale}\n                                />\n                              }\n                              onConfirm={async () => {\n                                if (Number(priceSale) > 100) {\n                                  message.error(`The availabel input in 0-100`);\n                                  return;\n                                }\n                                if (Number(priceSale) < 0) {\n                                  message.error(`The availabel input in 0-100`);\n                                  return;\n                                }\n                                try {\n                                  const res = await ApiProduct.update(c._id, {\n                                    salePrice: priceSale,\n                                  });\n                                  message.success(\"Update successful\");\n                                  getProductBySales();\n                                } catch (error) {}\n                              }}\n                              onCancel={() => {\n                                setPriceSale(0);\n                              }}\n                              okText=\"Yes\"\n                              cancelText=\"No\"\n                            >\n                              <Button type=\"warning\">Edit</Button>\n                            </Popconfirm>\n\n                            <Button\n                              ghost\n                              danger\n                              onClick={() => handleSaleUpdate(0, c)}\n                            >\n                              {\" \"}\n                              Off Sales\n                            </Button>\n                          </div>\n                        </div>\n                      </Card>\n                    </Col>\n                  ))\n                ) : (\n                  <div\n                    style={{\n                      display: \"flex\",\n                      justifyContent: \"center\",\n                      width: \"100%\",\n                    }}\n                  >\n                    <Empty />\n                  </div>\n                )}\n              </Row>\n            </Card>\n          </Col>\n        </Row>\n      </Spin>\n    </div>\n  );\n}\n"],"sourceRoot":""}