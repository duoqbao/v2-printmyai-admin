{"version":3,"sources":["api/upload.js","components/UpLoad/index.js","../node_modules/@ant-design/icons-svg/es/asn/DeleteOutlined.js","../node_modules/@ant-design/icons/es/icons/DeleteOutlined.js","api/template.js","pages/TextTemplate/index.js"],"names":["dataURItoBlob","dataURI","byteString","split","indexOf","atob","unescape","mimeString","ia","Uint8Array","length","i","charCodeAt","Blob","type","uploadImage","event","Promise","resolve","reject","Resizer","imageFileResizer","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","uri","formData","data","wrap","_context","prev","next","FormData","append","api","post","concat","API_URL","sent","t0","stop","_x","apply","arguments","isUrl","str","RegExp","test","UploadInput","props","setData","uploadFile","_props$title","title","_props$isInput","isInput","_useState","useState","_useState2","_slicedToArray","loading","setLoading","useEffect","uploadButton","_jsxs","children","_jsx","PlusOutlined","style","marginTop","Row","gutter","className","Col","span","hidden","Input","value","onChange","e","url","target","onChangeUrl","Upload","name","listType","showUploadList","beforeUpload","file","accept","Spin","spinning","width","height","backgroundImage","backgroundRepeat","backgroundSize","cursor","DeleteOutlined","ref","React","AntdIcon","_objectSpread","icon","DeleteOutlinedSvg","displayName","get","id","delete","TextTenplate","_useState3","_useState4","isVisible","setIsVisible","_useState5","_useState6","setUrl","_useState7","_useState8","urls","setUrls","getData","res","ApiText","_ref2","_callee2","_context2","then","catch","err","message","error","submitTemplate","_ref3","_callee3","_context3","success","Card","display","justifyContent","Button","onClick","map","item","index","lg","xxl","xs","Image","borderRadius","src","alt","createdAt","Popconfirm","onConfirm","_callee4","_context4","_id","onCancel","danger","Modal","visible","onOk"],"mappings":"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","file":"static/js/12.64e3375f.chunk.js","sourcesContent":["import api from \"axios\";\nimport { API_URL } from \"./index.js\";\nimport Resizer from \"react-image-file-resizer\";\nexport const dataURItoBlob = (dataURI) => {\n  var byteString;\n  if (dataURI.split(\",\")[0].indexOf(\"base64\") >= 0)\n    byteString = atob(dataURI.split(\",\")[1]);\n  else byteString = unescape(dataURI.split(\",\")[1]);\n\n  var mimeString = dataURI.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n\n  var ia = new Uint8Array(byteString.length);\n  for (var i = 0; i < byteString.length; i++) {\n    ia[i] = byteString.charCodeAt(i);\n  }\n\n  return new Blob([ia], { type: mimeString });\n};\nexport const uploadImage = (event) => {\n  if (event) {\n    return new Promise((resolve, reject) => {\n      Resizer.imageFileResizer(\n        event, // the file from input\n        1920,\n        1080,\n        \"PNG\", // compress format WEBP, JPEG, PNG\n        90, // quality\n        0, // rotation\n        async (uri) => {\n          try {\n            let formData = new FormData();\n            const dataURI = dataURItoBlob(uri);\n            formData.append(\"file\", dataURI);\n            const data = await api.post(`${API_URL}/upload`, formData);\n            resolve(data.data);\n          } catch (err) {\n            reject(err);\n          }\n        },\n        \"base64\" //\n      );\n    });\n  }\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Upload, Row, Col, Input, Spin } from \"antd\";\nimport { LoadingOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport \"./index.scss\"\nfunction isUrl(str) {\n  const pattern = new RegExp(\n    \"^(https?:\\\\/\\\\/)?\" + // protocol\n      \"((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|\" + // domain name\n      \"((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))\" + // OR ip (v4) address\n      \"(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*\" + // port and path\n      \"(\\\\?[;&a-z\\\\d%_.~+=-]*)?\" + // query string\n      \"(\\\\#[-a-z\\\\d_]*)?$\",\n    \"i\"\n  ); // fragment locator\n  return !!pattern.test(str);\n}\nexport default function UploadInput(props) {\n  const { data, setData, uploadFile, title = \"Url\", isInput = false } = props;\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    // getDataById(id);\n    setLoading(false);\n  }, [data]);\n  const beforeUpload = (file) => {\n    setLoading(true);\n    uploadFile(file);\n  };\n  const uploadButton = (\n    <div>\n      <PlusOutlined />\n      <div\n        style={{\n          marginTop: 8,\n        }}\n      >\n        Upload\n      </div>\n    </div>\n  );\n  const onChangeUrl = (e) => {\n    const url = e.target.value;\n    setData(url);\n  };\n  return (\n    <Row gutter={[24, 24]} className=\"UploadInput\">\n      <Col span={12} hidden={isInput}>\n        <div className=\"input\">\n          <label>{title}</label>\n          <Input value={data} onChange={(e) => onChangeUrl(e)} />\n        </div>\n      </Col>\n      <Col span={isInput ? 24 : 12}>\n        <Upload\n          name=\"avatar\"\n          listType={data && isUrl(data) ? \"text\" : \"picture-card\"}\n          className=\"avatar-uploader\"\n          showUploadList={false}\n          beforeUpload={beforeUpload}\n          accept=\"image/*\"\n        >\n          <Spin spinning={loading}>\n            {data && isUrl(data) ? (\n              <div\n                className=\"card-credit img-hover\"\n                style={{\n                  width: \"20rem\",\n                  height: \"11em\",\n                  backgroundImage: `url(${data})`,\n                  backgroundRepeat: \"no-repeat\",\n                  backgroundSize: \"contain\",\n                  cursor: \"pointer\",\n                }}\n              />\n            ) : (\n              uploadButton\n            )}\n          </Spin>\n        </Upload>\n      </Col>\n    </Row>\n  );\n}\n","// This icon file is generated automatically.\nvar DeleteOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z\" } }] }, \"name\": \"delete\", \"theme\": \"outlined\" };\nexport default DeleteOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport DeleteOutlinedSvg from \"@ant-design/icons-svg/es/asn/DeleteOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar DeleteOutlined = function DeleteOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: DeleteOutlinedSvg\n  }));\n};\n\nDeleteOutlined.displayName = 'DeleteOutlined';\nexport default /*#__PURE__*/React.forwardRef(DeleteOutlined);","import api from \"api/index\";\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default {\n  getList: () => {\n    return api.get(\"/assets\");\n  },\n  createTemplate: (file) => {\n    return api.post(\"/assets\", { url: file });\n  },\n  delete: (id) => {\n    return api.delete(`/assets/${id}`);\n  },\n};\n","import React, { useEffect, useState } from \"react\";\nimport {\n  Modal,\n  Spin,\n  Row,\n  Col,\n  Button,\n  Card,\n  message,\n  Image,\n  Popconfirm,\n} from \"antd\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport UploadInput from \"components/UpLoad\";\nimport ApiText from \"api/template\";\nimport { uploadImage } from \"api/upload\";\nimport \"./index.scss\";\nexport default function TextTenplate() {\n  const [loading, setLoading] = useState(false);\n  const [isVisible, setIsVisible] = useState(false);\n  const [url, setUrl] = useState(\"\");\n  const [urls, setUrls] = useState([]);\n  const getData = async () => {\n    setLoading(true);\n    try {\n      const res = await ApiText.getList();\n      setUrls(res);\n      setLoading(false);\n    } catch (error) {}\n  };\n  useEffect(() => {\n    getData();\n  }, []);\n  const beforeUpload = async (file) => {\n    uploadImage(file)\n      .then((res) => {\n        setUrl(res);\n      })\n      .catch((err) => {\n        setUrl(null);\n        message.error(\"Failed to upload image\");\n      });\n  };\n  const submitTemplate = async () => {\n    try {\n      const res = await ApiText.createTemplate(url);\n      setIsVisible(false);\n      setUrl('');\n      message.success(\"Created successfully\");\n      getData();\n    } catch (err) {}\n  };\n  return (\n    <Spin spinning={loading}>\n      <div className=\"layout-styles textTemplate\">\n        <Card title=\"Text Template\">\n          <Row gutter={[12, 12]}>\n            <Col span={24}>\n              <div style={{display:'flex', justifyContent: 'flex-end'}}>\n                <Button\n                  onClick={() => {\n                    setIsVisible(true);\n                  }}\n                  type=\"primary\"\n                >\n                  Create Template\n                </Button>\n              </div>\n            </Col>\n            <Col span={24}>\n              <Row gutter={[12, 12]}>\n                {urls.map((item, index) => {\n                  return (\n                    <Col lg={6} xxl={3} xs={24}  key={index}>\n                      <div className=\"image-item\">\n                        <Image\n                          style={{ width: 180, height: 180, borderRadius: 8 }}\n                          src={item.url}\n                          alt={item.createdAt}\n                        />\n                        <Popconfirm\n                          title=\"Are you sure delete this template?\"\n                          onConfirm={async () => {\n                            try {\n                              const res = await ApiText.delete(item._id);\n                              message.success(\"Deleted successfully\");\n                              getData();\n                            } catch (error) {}\n                          }}\n                          onCancel={() => {}}\n                        >\n                          <Button type=\"link\" className=\"image-icon\"  icon={<DeleteOutlined />} danger/>\n                        </Popconfirm>\n                      </div>\n                    </Col>\n                  );\n                })}\n              </Row>\n            </Col>\n          </Row>\n        </Card>\n      </div>\n      <Modal\n        title=\"Upload\"\n        visible={isVisible}\n        onCancel={() => {\n          setUrl('');\n          setIsVisible(false);\n        }}\n        onOk={submitTemplate}\n        width={600}\n      >\n        <Row gutter={[12,12]}>\n          <Col span={24}>\n            <UploadInput\n              data={url}\n              setData={(e) => setUrl(e)}\n              uploadFile={beforeUpload}\n            />\n          </Col>\n        </Row>\n      </Modal>\n    </Spin>\n  );\n}\n"],"sourceRoot":""}